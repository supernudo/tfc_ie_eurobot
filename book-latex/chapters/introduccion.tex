%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
% Generic template for TFC/TFM/TFG/Tesis
%
% $Id: introduccion.tex,v 1.6 2014/02/11 11:00:06 macias Exp $
%
% By:
%  + Javier Macías-Guarasa.
%    Departamento de Electrónica
%    Universidad de Alcalá
%  + Roberto Barra-Chicote.
%    Departamento de Ingeniería Electrónica
%    Universidad Politécnica de Madrid
%
% Based on original sources by Roberto Barra, Manuel Ocaña, Jesús Nuevo,
% Pedro Revenga, Fernando Herránz and Noelia Hernández. Thanks a lot to
% all of them, and to the many anonymous contributors found (thanks to
% google) that provided help in setting all this up.
%
% See also the additionalContributors.txt file to check the name of
% additional contributors to this work.
%
% If you think you can add pieces of relevant/useful examples,
% improvements, please contact us at (macias@depeca.uah.es)
%
% Copyleft 2013
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\chapter{Introducción al proyecto}
\label{cha:introduccion}

\begin{FraseCelebre}
  \begin{Frase}
    Desocupado lector, sin juramento me podrás creer que quisiera que este
    libro [...] fuera el más hermoso, el más gallardo y más discreto que
    pudiera imaginarse\footnote{Tomado de ejemplos del proyecto \texis{}.}.
  \end{Frase}
  \begin{Fuente}
    Miguel de Cervantes, Don Quijote de la Mancha
  \end{Fuente}
\end{FraseCelebre}


\section{Presentación}
\label{sec:presentacion}

Este trabajo de fin de carrera trata sobre el desarrollo de robots para la competición de robots Eurobot \cite{eurobot}. Pretende ser un manual de referencia para todo aquel que quiera construir un robot para participar en Eurobot\footnote{O para desarrollar un robot de similares características para cualquier otro cometido}. Todo lo que se expone en este libro esta se sustenta en la experiencia adquirida en el desarrollo de robots participantes en Eurobot entre los años 2003 y 2015. Especialmente en el periodo entre 2010 y 2015.

\section{La competición Eurobot}
\label{sec:la_competicion_eurobot}

Eurobot es un concurso internacional de robótica creado en 1998 a partir de la Copa de Francia de la robótica \cite{cdr} (Coupe de France de robotique). El concurso está abierto a equipos de jóvenes, organizados ya sea en proyectos de estudiantes o en clubes independientes. Eurobot se lleva a cabo en Europa, pero da la bienvenida a los equipos de todos los continentes.

Cada año, las reglas se publican alrededor de octubre. Los equipos tienen entonces varios meses para diseñar y construir sus robots y competir entre abril y junio en el concurso nacional, en el cual se pueden seleccionar sólo 3 equipos por país. Los mejores equipos de cada país se reunirán después para competir en las finales de Eurobot.

Las reglas cambian cada año, sin embargo, la base es siempre la misma:

\begin{itemize}
\item Los robots tienen aproximadamente el tamaño de un cubo de 30 cm.
\item El campo de juego tiene una dimensión de 2 metros de ancho y 3 metros de largo.
\item El juego tiene 90 segundos de duración.
\item Los robots tienen que llevar a cabo varias tareas en el campo con el fin de ganar tantos puntos como sea posible.
\item Los robots tienen que evitarse unos a otros y evitar los choques.
\item Los robots son completamente autónomos y deben hacer todas las acciones por ellos mismos.
\end{itemize}

Tal y como está diseñado, Eurobot constituye un reto de ingeniería que permite a alumnos de electrónica, mecánica e informática aplicar sus conocimientos o ampliarlos y compartirlos. También hace, por ejemplo, que alumnos de electrónica aprendan mecánica o informática o ambos campos o todos. Dada la complejidad de los robots suelen ser construidos por equipo formados de al menos 2 personas, lo cual implica cierta organización, división de tareas y trabajo en equipo. Un equipo numeroso permite desarrollar robots con partes más especializadas pero implica una gestión y coordinación mayor. Por otro lado, Eurobot implica confeccionar un producto completo, original y funcional desde cero\footnote{No siempre se ha de empezar desde cero, un desarrollo modular y estructurado permite partir de una base mínima.} (o como diríamos en Inglés \emph{from scratch}) en cosa de 6 o 7 meses. Esto implica una elección y compra de materiales, componentes, diseño electrónico y mecánico, construcción de prototipos, desarrollo de software, ... y en definitiva una gestión del tiempo. Tiempo que suele escasear porque los participantes, generalmente alumnos, disponen de él escasamente\footnote{Y parece ser que menos aún con los actuales planes de estudios Bolonia}.


La comunidad de Eurobot se comunica principalmente a través de sus foros\cite{foros_eurobot}. Hay tres foros principales: un foro relacionado con las reglas de cada año, el foro de Eurobot Open\cite{foro_eurobot_open} y el foro de la Copa de Francia de la robótica\cite{foro_copa_francia}. Este último es el foro más activo dado que la Copa nacional de Francia es la de mayor tradición y la que reúne el mayor numero de participantes. Este foro, aunque está escrito en francés, es el que acumula la mayoría de la información acerca de la competición y de temas técnicos. Además, cada equipo suele tener una página web, blog o canal de Youtube donde comparte los avances de los robots que construyen cada año.

Eurobot está organizada gracias la asociación internacional de Eurobot y a la asociación francesa \emph{Planet Sciences}\cite{planet_sciences} y a muchas otras asociaciones, escuelas, universidades y personas voluntarias de los países participantes. Es increíble la cantidad de personas que apoyan Eurobot y trabajan de forma voluntaria sin ninguna remuneración más que la satisfacción de estar implicados y formar parte de esta fiesta que es Eurobot. Y esto incluye a los participantes, ya que ganar Eurobot no implica ningún premio económico. En total, un montón de gente que trabaja para disfrutar y divertirse con la robótica.

\section{El equipo \emph{Eurobotics Engineering}, historia y antecedentes}
\label{sec:equipo_eurobotics}

\emph{Eurobotics Engineering}\cite{arc_robots} es un equipo participante en Eurobot formado por entusiastas de la robótica. Está formado por estudiantes de la Universidad de Alcalá (UAH): ingenieros de telecomunicación, de electrónica, de telemática y de electrónica industrial.

La historia de este equipo se remonta al año 2003, año en el que el Departamento de Electrónica de la UAH decide montar un equipo patrocinado a partir de la iniciativa de un grupo de alumnos de participar en Eurobot 2002. Los integrantes del equipo se renuevan cada año excepto algunos que se mantienen. Exceptuando el año 2009, el resto de años el equipo participó en Eurobot. En el año 2010 Diego Salazar y Javier Baliñas crean el equipo de Eurobot llamado \emph{Eurobotics Engineering} y en el año 2011, junto con Nilo Masias, fundaron y la Asociación de Robótica de Coslada (ARC).

El equipo Eurobot Engineering participó en Eurobot desde el año 2010 hasta el año 2015 (exceptuando el año 2013). Durante estos años ha contado con el apoyo del Dpto. de Electrónica de la Universidad de la UAH\cite{depeca,uah} y el Ayuntamiento de Coslada, además del patrocinio de Ayudas Hidráulicas\cite{ayudas_hidraulicas}, Carpintería Inglés, Ro-botica\cite{ro_botica} (2010-2012), el Consejo de estudiantes de la UAH\cite{consejo_de_estudiantes} (2014-2015) y Mobile Minds\cite{mobile_minds} (2015).


\section{La robótica educativa}
\label{sec:robotica_educativa}

A día de hoy la robótica constituye una herramienta educativa muy potente. Permite aprender y poner en practica diferentes ramas de la ciencia. Lo hace a través de la ingeniería y las áreas de la ciencia en las que se sustenta (matemáticas, física, química, entre otras) y utilizando la tecnología actual. Este tipo de educación se denomina STEM\cite{stem} acrónimo del inglés \emph{Science, Technology, Engineering and Mathematics} (Ciencia, Tecnología, Ingeniería y Matemáticas). Además permite potenciar la creatividad de las tecnologías digitales, más allá de la simple explotación de ellas \cite{strategy_1_0}.

Además si la robótica se hace en equipo, como suele ser habitual en Eurobot, la robótica permite desarrollar habilidades y competencias\cite{robocompetences} como el trabajo en grupo, la motivación personal, gestión de retos y objetivo, y el manejo del fracaso y las emociones que implican los errores, entre otras.

Este trabajo de fin de carrera constituye en sí un ejemplo de la robótica como herramienta educativa y de sus resultados. Los robots desarrollados ha ayudado adquirir experiencia, conocimientos y experiencias de gran valor añadido a los estudios universitarios de los diferentes integrantes del equipo \emph{Eurobotics Engineering} y anteriores.

En el campo de la ingeniería electrónica y mecánica, se ha ganado experiencia en el proceso de diseño, fabricación y montaje de productos que implican una electrónica y una mecánica (tarjetas electrónicas, piezas mecánicas, mecanismos, cableado, etc). Se han aprendido a trabajar con diferentes tipos de materiales (madera, plástico, aluminio, polímeros, etc), a utilizar herramientas y a fabricar piezas mecánicas por diferentes procesos de fabricación (impresión 3D, fresado, plegado, inyección en silicona, etc.).

El simple hecho de que los robots se muevan y que lo hagan hacia lugares concretos implica la aplicación de las matemáticas y la física. Así, para ir de un punto $A$ a un punto $B$ se utiliza la trigonometría. Esto es, el robot necesita mirar a $B$ (girar un ángulo $\alpha$) y luego avanzar una distancia $d$. Y además si se desea el tiempo en ir de $A$ a $B$ sea el menor posible es necesario utilizar las leyes de Newton para el calculo de la aceleración y velocidad máxima, que permitan al robot no derrapar ni pasarse de frenada.

Especialmente, dado que un robot en última medida es controlado desde un microcontrolador o procesador similar, la robótica implica adquirir conocimientos sobre la ingeniería del software y el desarrollo de sistemas embebidos\cite{making_embedded_systems}. Seguramente algún momento se quiera utilizar una librería o código desarrollada por otras personas pero que resulta muy útil. Se tendrá aque aprender a maneja y confiar en librerías de terceros y si son de código abierto quizá permita colaborar y solucionar bugs. Se aprende mucho analizando y comprendiendo el código de otros. Además seguramente estas librerías utilizarán algún sistema de control de versiones distribuido como Git, Mercurial o centralizado como SVN o incluso sistemas más antiguos como CVS. La mayoría de los desarrolladores de software son reacios al principio a utilizar un sistema de control de versiones, suele ser una decisión personal que normalmente cae por su propio peso cuando se trabaja con proyectos de código extensos.

A medida que el código desarrollado vaya creciendo surgen planteamientos de como organizarlo, como reutilizar código de un año a otro o incluso como reutilizar código del microcontrolador que se está utilizando para poder utilizarlo en otros proyectos. Esto lleva a desarrollar código de una forma más modular y estratificada. Quizá más adelante, el microcontrolador utilizado hasta el momento se quede escaso de recursos, se quiera cambiar a otro de la misma familia pero con más recursos y reutilizar las librerías que se han desarrollado hasta entonces y mantener la compatibilidad con el antiguo microcontrolador. Esto por ejemplo se puede lograr mediante la compilación condicional.

Al ir ganando experiencia, se es capaz de detectar las partes fundamentales y comunes a la hora de implementar una aplicación o funcionalidad. Si se observa como lo ha resuelto el resto del mundo se cae en la cuenta que hay ciertas cosas que ya están muy estudiadas y aparecen en cualquier aplicación que desarrollemos. Así se podrá detectar y aplicar patrones que facilitan desarrollo.

Quizá llegue un momento en que el tiempo que lleva realizar la depuración del robot sobre el entorno real es mucho y es un proceso lento, o quizá no se disponga de dicho entorno porque no queda otra opción que desarrollar de forma remota. Para todo eso, es muy útil el uso de simuladores o bancos de pruebas\footnote{También conocidos en la literatura anglosajona como \emph{sandbox}.} que permiten emular las interfaces de entrada y salida del robot (sensores y motores) o sus estímulos (obstáculos).

La robótica se disfruta, es divertida, pero también se sufre y requiere de un indudable ejercicio de abstracción y concentración. Es necesario investigar sobre cosas nueva o reforzar conocimientos ya adquiridos, aplicarlos y madurarlos. Son más comunes los errores que los aciertos, nada sale a la primera, y la \emph{ley de Murphy}\footnote{"Si algo puede salir mal, saldrá mal"} suele no fallar.  Todo esto lleva al aprendizaje y aplicación del \emph{método científico} para experimentar o para resolver problemas encontrados, como comportamientos no esperados del robot.

Durante el desarrollo de la robótica, puede parecer que es una actividad poco agradecida o agradecida en momentos muy cortos. Pero merece la pena y además se demuestra que más tarde, en el mundo laboral o de la investigación, es cuando la robótica tiene gran parte su retorno\footnote{El autor de este proyecto esta convencido de ello y lo ha experimentado.}.


\section{Aprendiendo de gigantes.}
\label{sec:aprendiendo_de_gigantes}

Hoy en día es casi impensable que una sola persona pueda realizar avances en los diferentes campos de la ciencia equiparables a los descubrimientos de los grandes científicos de la historia. Así la investigación y el desarrollo tecnológico son llevados a cabo por grupos de personas cada cual experta en ciertos tema concretos. Por otro lado la tecnología y sus aplicaciones cada vez son más complejas y eso es en gran parte a que los nuevos desarrollos se apoyan en desarrollos anteriores que permiten abstraerse de aquello que se encuentra fuera del alcance de un objetivo concreto.

Quizá el ejemplo más conocido a día de hoy es la plataforma de desarrollo Arduino\cite{arduino} que permite desarrollar sistemas embebidos partiendo de un conocimiento muy básico o nulo sobre microcontroladores. Esto es gracias a que la plataforma de desarrollo Arduino tiene una vasta librería de funciones que abstraen la programación de bajo nivel del microcontrolador de forma que no se \emph{escribe un bit} de uno o varios \emph{registros} de nombres aparentemente sin significado, si no que se \emph{detiene}, se \emph{cambia el sentido} o se \emph{cambia la velocidad} de un \emph{motor}. Además todas esas funciones se encuentran documentadas y son accesibles\cite{arduino_src} para su modificación o consulta. Así, si una funcionalidad de una librería no existe, es posible estudiar como está implementada y añadir nuevas funcionalidades.

En cierta forma, esta manera de abordar el aprendizaje y el desarrollo de aplicaciones tecnológicas es una forma natural y acorde con el desarrollo tecnológico de la sociedad actual. Hoy en día la tecnología que utilizamos en el día a día es compleja y muy abstracta por lo que no tiene sentido que el aprendizaje de la misma comience desde los niveles más básicos. Plataformas como Arduino permiten comenzar en un punto intermedio y poder crecer hacia niveles de abstracción mayores (grano grueso) o hacia niveles inferiores más específicos (grano fino).

Pues bien este proyecto no es una excepción y también se ha apoyado en hombros de gigantes. El código fuente de los microcontroladores de algunos de los robots desarrollados (Husillo, Joselito o Campanolo) fue escrito desde cero. Otros (Electrococo, Mr.Proper y Topolino) se ayudaron del código escrito en años anteriores para para otros robots. Y finalmente a partir del año 2010 los robots (Trompetero, Zamorano, Automático, Crispin, P.Tinto y Tirantes) se desarrollaron a partir del código abierto escrito por terceros.

El utilizar código abierto de terceros vino dado por el objetivo de evolucionar tecnológicamente los robots a desarrollar para Eurobot. Para ello se estudió los fundamentos técnicos y tecnológicos de los robots por aquella época obtenían muy buenos resultados como RCVA\cite{rcva}, Microb Tecnology\cite{microb}, RCA Archen\cite{rca_aachen} o Turak\cite{turak}. Al final de dicho estudio se establecieron los requisitos de la mecánica, hardware y software necesarios, y se desarrollo una plataforma robótica base (el \emph{Dummy robot}, ver \ref{dummy_robot}) con una mecánica y una electrónica de acuerdo a los requisitos buscados.

\begin{figure}
\centering
\includegraphics[height=.2\textheight]{dummy_robot_1}
\hspace{1cm}
\includegraphics[height=.2\textheight]{dummy_robot_2}

\caption{\emph{Dummy robot}. Plataforma robótica base desarrollada en 2010. Diseño mecánico: Diego Salazar Accuci. Electrónica y programación: Javier Balinas.}

\label{dummy_robot}
\end{figure}


Al final del proceso de estudio se descubrieron las librerías Aversive desarrolladas por el equipo \emph{Microb Technology} para microcontroladores AVR de Atmel. Por aquél entonces, la electrónica que se estaba diseñando estaba basada en microcontrolador dsPIC de Microchip. Podríamos a ver migrado el HW y utilizar microcontroladores AVR, pero al final se optó por migrar las librerías Aversive a la arquitectura de dsPIC, lo que se denominó Aversive4dsPIC\footnote{Pronunciado \emph{Aversive for dsPIC}, Aversive para dsPIC}.

La decisión de utilizar estas librerías y portarlas permitió no solo aprender a utilizarlas desde la capa de aplicación (el robot) sin no estudiar como estaban implementadas y adaptarlas para ser compatibles con una arquitectura diferente. En definitiva se reutilizó el código de terceros, lo cual implica mucho más que el simple hecho de aprovechar el trabajo realizado por otros. En este caso las librerías Aversive\cite{aversive_src} son unas librerías libres desarrolladas por varias personas, versionada bajo un sistemas de control de versiones, que están muy bien estructuradas, escritas siguiendo una guía de estilo común, que explota al máximo el lenguaje ANSI C, que cuenta con un \emph{toolchain}\footnote{Cadena de herramientas: conjunto de programas mediante los cuales se construye el programa que se ejecuta en el microcontrolador} que utiliza herramientas libres, que implementan todo tipo de funcionalidades y muchas de ellas dirigidas al desarrollo de robots como los de Eurobot. La migración de las librerías Aversive se realizó siguiendo y manteniendo toda las características anteriormente mencionada, lo cual implicó el aprendizaje de las mismas y de todos los conceptos derivados y subyacentes de ellas.     



\section{Motivación y objetivos}
\label{sec:motivacion_y_objetivos}

Todo el trabajo realizado en el desarrollo de los diferentes robots viene principalmente motivado por la afición a la robótica, la electrónica, los sistemas embebidos y por la inquietud de inventar y crear cosas.

Por otro lado, el objetivo fundamental de este trabajo es la divulgación del conocimiento adquirido en la realización de robots que compiten en Eurobot, siendo los objetivos específicos de este proyecto los siguientes:

\begin{itemize}
\item Reflexionar y analizar diferentes aspectos indirectamente relacionados con el desarrollo de ingeniería (el equipo de trabajo, organización, ...)
\item Analizar y describir los fundamentos de ingeniería implícitos (dinámica, cinemática, sistemas de control, ...).
\item Describir las partes fundamentales del desarrollo (movimiento, navegación, posicionamiento, estrategia ...) y diseño un robot de Eurobot (mecánica, electrónica, programación, ...).
\item Presentar implementaciones y diseños reales de cada una de las partes fundamentales de un robot de Eurobot.
\item Documentar todas aquellos diseños, desarrollos o algoritmos realizados que puedan servir de punto de partida o ser reutilizados en futuros desarrollos (diseños electrónicos, librerías software, herramientas de simulación, ...).
\end{itemize}

\section{Organización del libro}
\label{sec:organizacion_del_libro}

El libro cuenta con 5 capítulos adicionales a este capítulo:

\begin{description}

\item El robot de Eurobot

Capítulo que describe las partes o fases principales implicadas en el desarrollo de un robot de Eurobot: las especificaciones funcionales (las reglas del juego), las partes principales de un robot de Eurobot, las características de la mecánica, electrónica y software, las fases típicas de diseño y la depuración y puesta en marcha del robot.

\item El equipo de Eurobot

Reflexión sobre el equipo de personas que desarrollan un robot de Eurobot y varios temas relacionados como el número de integrantes, expectativas, motivación y objetivos del equipo, división de tareas o la organización y metodología de trabajo.

\item Plataforma robótica base

Descripción de lo que se ha considerado plataforma robótica base, un robot base cuyas características y funcionalidades son comunes a cualquier juego de Eurobot y sobre el que desarrollar nuevos robots participantes. El capítulo se centra en un robot de tracción diferencial y control de posición polar mediante odometría. Además trata el sistema desarrollado para la detección y evitación de los robots oponentes.

\item Sistemas mecánicos para la manipulación de elementos de juego

Capítulo que trata sobre los sistemas mecánicos (brazos, pinzas, catapultas, etc.) que se desarrollan específicamente para manipular los elementos de juego de la prueba de Eurobot. Se realiza una revisión de las soluciones mecánicas conocidas y utilizadas hasta la fecha por diferentes equipos. Y posteriormente se tratan los componentes fundamentales de estos sistemas mecánicos (actuadores y sensores) y la forma de controlarlos y sincronizarlos con el movimiento del robot.  

\item Implementación de la estrategia de juego

Por último se trata el tema de la estrategia de juego de un robot de Eurobot. Se analiza los elementos y diferentes fases en las que se puede dividir un partido y los diferentes patrones de implementación software. Se trata la gestión de trayectorias durante un partido, algo nada determinista dado que se compite con un oponente del que se desconoce el comportamiento. Además también se habla de las estrategias con dos robots y sobre la simulación de las estrategias y sus ventajas. 

\end{description}



%%% Local Variables:
%%% TeX-master: "../book"
%%% End:
